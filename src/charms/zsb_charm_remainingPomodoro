#!/usr/bin/env zsh
set -o errexit
set -o pipefail

local lastPomodoroSessionLines=`tmux capture-pane -p -t pomodoro | rg -m1 '^‚è≥ [0-5][0-9]'`

local popupMessage
local popupWidth

if [[ -n "$lastPomodoroSessionLines" ]]; then
  popupMessage=$lastPomodoroSessionLines
  popupWidth=9
else
  popupMessage=' No pomodoro timer is running.'
  popupWidth=33
fi

if (( $ZSB_MACOS ))
  then alert $popupMessage
  else timeout 0.6 rofi -width -${popupWidth} -e $popupMessage
fi

exit 0
